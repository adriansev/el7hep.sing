Bootstrap: docker
From: centos:centos7
Include: yum yum-utils bash bash-completion util-linux coreutils sudo curl fuse fuse-libs fuse3 fuse3-libs bindfs

%labels
    Author Adrian.Sevcenco@spacescience.ro
    Version 0.0.1
    Description Minimal el7, HEP_OSlibs + cvmfs (configs: default+egi+osg) container


%help
Generic HEP oriented container (it includes HEP_OSlibs dependency list)
The default is either run the argument list or just start bash

%files
sudoers /etc/sudoers

%post
yum -y install \
https://dl.fedoraproject.org/pub/epel/epel-release-latest-7.noarch.rpm \
https://linuxsoft.cern.ch/wlcg/centos7/x86_64/wlcg-repo-1.0.0-1.el7.noarch.rpm;

yum -y update;

# http://repository.egi.eu/sw/production/umd/4/centos7/x86_64/updates/umd-release-4.1.3-1.el7.centos.noarch.rpm;
# https://ecsft.cern.ch/dist/cvmfs/cvmfs-release/cvmfs-release-latest.noarch.rpm \
# yum-config-manager --disable UMD*;

yum install -y HEP_OSlibs;
rm -rf /var/cache/yum;

%runscript
[[ -n "${@}" ]] && exec "${@}" || bash

